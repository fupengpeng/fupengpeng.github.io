!function(n){function t(n,t){this.bannerWrap=n,this.bannerList=n.children(),this.bannerBtnWrap=t.bannerBtnWrap,this.bannerBtn=t.bannerBtnWrap.children(),this.arrowLeftBtn=t.arrowLeftBtn,this.arrowRightBtn=t.arrowRightBtn,this.nTime=t.time,this.nTransitionTime=t.transition,this.nWindowWidth=window.innerWidth,this.n=1,this.x=0,this._x=0,this.oTimer=null,this.bAutoBanner=t.autoBanner}t.prototype={constrctor:t,init:function(){var t=this;t.bannerList.each(function(){n(this).width(t.nWindowWidth),t.bannerBtnWrap.append("<li></li>")}),t.bannerList.first().before(t.bannerList.last().clone()),t.bannerList.last().after(t.bannerList.first().clone()),t.bannerList=t.bannerWrap.children(),t.bannerBtn=n("li",t.bannerBtnWrap),t.bannerWrap.css({width:t.bannerList.length*t.nWindowWidth+"px",marginLeft:t.n*-t.nWindowWidth+"px"}),t.bannerBtnWrap.css({width:t.bannerBtn.length*t.bannerBtn.outerWidth(!0)+"px",marginLeft:function(){return n(this).width()/-2+"px"}}).children("li:eq(0)").addClass("on"),t.bAutoBanner&&t.autoBanner(this),t.resize(this).move(this).stop(this)},resize:function(t){return n(window).on("resize",function(){t.nWindowWidth=n(this).width(),t.bannerList.each(function(){n(this).width(t.nWindowWidth)}),t.bannerWrap.css({width:t.bannerList.length*t.nWindowWidth+"px",marginLeft:t.n*-t.nWindowWidth+"px"})}),t},move:function(t){function i(n,i){n.addClass("on").siblings().removeClass("on"),i.animate({marginLeft:t.n*-t.nWindowWidth+"px"},t.nTransitionTime)}return t.bannerBtn.mouseenter(function(){t.bannerWrap.is(":animated")||(t.n=n(this).index()+1,i(n(this),t.bannerWrap))}),t.arrowLeftBtn.click(function(){t.bannerWrap.is(":animated")||(--t.n<0&&(t.n=t.bannerList.length-3,t.bannerWrap.css("marginLeft",(t.bannerList.length-2)*-t.nWindowWidth+"px")),i(t.bannerBtn.eq(t.n-1),t.bannerWrap))}),t.arrowRightBtn.click(function(){t.bannerWrap.is(":animated")||(++t.n>t.bannerList.length-1?(t.n=2,t.bannerWrap.css("marginLeft",-t.nWindowWidth+"px")):t.n>t.bannerList.length-2&&t.bannerBtn.eq(0).addClass("on").siblings().removeClass("on"),i(t.bannerBtn.eq(t.n-1),t.bannerWrap))}),t.bannerWrap.on("touchstart",function(n){t.x=n.originalEvent.touches[0].pageX}).on("touchmove",function(i){t._x=i.originalEvent.touches[0].pageX,(t.x-t._x>0?1:0)?n(this).is(":animated")||(++t.n>t.bannerList.length-1?(t.n=2,n(this).css("marginLeft",-t.nWindowWidth+"px")):t.n>t.bannerList.length-2&&t.bannerBtn.eq(0).addClass("on").siblings().removeClass("on"),t.bannerBtn.eq(t.n-1).addClass("on").siblings().removeClass("on"),n(this).animate({marginLeft:t.n*-t.nWindowWidth+"px"},t.nTransitionTime)):n(this).is(":animated")||(--t.n<0&&(t.n=t.bannerList.length-3,n(this).css("marginLeft",(t.bannerList.length-2)*-t.nWindowWidth+"px")),t.bannerBtn.eq(t.n-1).addClass("on").siblings().removeClass("on"),n(this).animate({marginLeft:t.n*-t.nWindowWidth+"px"},t.nTransitionTime))}),this},autoBanner:function(n){return n.oTimer=setInterval(function(){n.arrowRightBtn.click()},n.nTime),this},stop:function(n){n.bannerWrap.parent().hover(function(){clearInterval(n.oTimer)},function(){n.autoBanner(n)})}};var i={bannerBtnWrap:n(".banner-btn-wrap"),arrowLeftBtn:n(".banner-arrow-left"),arrowRightBtn:n(".banner-arrow-right"),autoBanner:!1,time:5e3,transition:1e3};n.fn.seamlessBanner=function(e){new t(this,n.extend(i,e)).init()}}(jQuery);
